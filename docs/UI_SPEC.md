# 市民向けUI仕様書

**作成日**: 2026-01-20

---

## 1. 概要

市民向けページのUI仕様。全ての自治体ページで統一されたヘッダーを表示し、ユーザビリティを向上させる。

---

## 2. 共通ヘッダー

### 2.1 表示要素

全ての自治体ページ（`/[municipality]/**`）に以下の要素を含むヘッダーを表示:

1. **INNOMAロゴ** - クリックでINNOMAトップページへ遷移
2. **自治体名** - クリックで自治体トップページへ遷移
3. **検索バー** - 当該自治体内のコンテンツを検索

### 2.2 レイアウト

```
┌─────────────────────────────────────────────────────────────┐
│  INNOMA | 青ヶ島村      [検索...          ] [トップ][他の自治体] │
└─────────────────────────────────────────────────────────────┘
```

### 2.3 レスポンシブ対応

**デスクトップ（md以上）**:
- ロゴ、自治体名、検索バー、ナビゲーションを1行に表示

**モバイル（md未満）**:
- ロゴと自治体名のみ表示
- ハンバーガーメニューで検索とナビゲーションを展開

### 2.4 アクセシビリティ

- キーボードナビゲーション対応
- フォーカス状態の視覚的表示（黄色リング）
- スクリーンリーダー対応（aria-label）

---

## 3. 検索機能

### 3.1 検索バーの動作

- プレースホルダー: 「{自治体名}内を検索...」
- Enter または検索ボタンで検索実行
- 検索結果ページ: `/{municipality}/search?q={query}`

### 3.2 検索対象

- 当該自治体のArtifact内のコンテンツ
- タイトル、本文、メタデータを対象
- ブロックから抽出したテキスト（RichText、InfoTable、ProcedureSteps等）

### 3.3 検索結果の表示

- コンテンツタイプバッジ
  - ページ: グレー
  - 手続き: グリーン
  - 緊急情報: レッド
  - お知らせ: ブルー
- タイトルと概要テキスト
- 関連度スコアでソート

### 3.4 検索アルゴリズム

| マッチ条件 | スコア |
|-----------|--------|
| タイトル完全一致 | +100 |
| タイトル部分一致 | +50 |
| 本文マッチ回数 | +5/回（最大30） |
| 各単語のタイトルマッチ | +20 |
| 各単語の本文マッチ | +5 |

---

## 4. ナビゲーション

### 4.1 主要リンク

| リンク | 遷移先 | 説明 |
|--------|--------|------|
| INNOMA | `/` | INNOMAトップページ |
| 自治体名 | `/{municipality}` | 自治体トップページ |
| トップ | `/{municipality}` | 自治体トップページ（デスクトップ） |
| 他の自治体 | `/municipalities` | 自治体一覧ページ |

---

## 5. スタイリング

### 5.1 カラー

- ヘッダー背景: `bg-white`
- INNOMAロゴ: `text-blue-600`（hover: `text-blue-700`）
- 自治体名: `text-solid-gray-900`
- 検索バー: DA-DSの入力フィールドスタイル
- フォーカスリング: `ring-yellow-300`

### 5.2 レイアウト

- 最大幅: `max-w-7xl`
- パディング: `px-4 py-3`
- Sticky: `sticky top-0 z-50`
- 下線: `border-b border-solid-gray-300`

---

## 6. 関連ファイル

| ファイル | 説明 |
|----------|------|
| `components/layout/MunicipalityHeader.tsx` | ヘッダーコンポーネント |
| `app/[municipality]/layout.tsx` | 自治体ページレイアウト |
| `app/[municipality]/search/page.tsx` | 検索結果ページ |
| `app/[municipality]/search/MunicipalitySearchBox.tsx` | 検索ボックスコンポーネント |
| `lib/search/index.ts` | 検索ライブラリ |

---

## 7. 今後の拡張予定

- 緊急情報バナーの表示
- 言語切り替え機能
- ユーザー設定（フォントサイズ、コントラスト）
